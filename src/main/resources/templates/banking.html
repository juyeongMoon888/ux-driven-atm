<!DOCTYPE html>
<html>
<head>
    <title>ATM 메인</title>
</head>
<body>
<h1>내 계좌</h1>

<select id ="accountSelect">
    <option disabled selected>계좌를 선택하세요</option>
</select>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        const token = localStorage.getItem("token");

        if (!token) {
            alert("로그인이 필요합니다.");
            location.replace("/login");
            return;
        }

        fetch("/api/users/me", {
            headers: {
                Authorization: "Bearer " + token
            }
        })
        .then(res => {
            if (!res.ok) {
                if (res.status === 401) {
                    localStorage.removeItem("token");
                    alert("세션이 만료되었습니다.");
                    location.replace("/login");
                } else {
                    alert("오류가 발생했습니다.");
                }
            }
        })
        .catch(() => {
            alert("서버에 연결할 수 없습니다.");
        });
    });

</script>

</body>
</html>
